!function(){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}var u=function(){},e=function(){function o(e,t,n){r(this,o),this.onOpen=t||u,this.onClose=n||u,this.intervals=e||[0],this.currentInterval=0,this.last=Date.now(),this.providers=[],this.current=-1,this.started=!1,this.chain=!1,this.requested=!1}return i(o,[{key:"open",value:function(){console.log("ADS: manager.open"),this.started=!0,console.log("ADS: manager.onOpen"),this.onOpen()}},{key:"end",value:function(){console.log("ADS: manager.end"),this.current=-1,this.chain=!1,this.started=!1,this.requested=!1,console.log("ADS: manager.onClose"),this.onClose()}},{key:"close",value:function(e,t){console.log("ADS: manager.close"),this.providers[this.current]&&e===this.providers[this.current].provider&&this.requested&&(t?this.next():this.started?(this.last=Date.now(),this.currentInterval<this.intervals.length-1&&this.currentInterval++,this.end()):this.next())}},{key:"next",value:function(){if(console.log("ADS: manager.next"),this.current++,this.current>=this.providers.length)this.end();else{var e=this.providers[this.current];if(!e.ready)return e.provider=e.provider(),e.provider.manager=this,e.ready=!0,void this.end();if(e.preroll)e.provider.show()?this.requested=!0:this.next();else this.next()}}},{key:"addProvider",value:function(e,t){var n="function"!=typeof e;n&&(e.manager=this),this.providers.push({provider:e,preroll:t,ready:n})}},{key:"getProvider",value:function(t){var e=this.providers.find(function(e){return e.ready&&e.provider.name===t});return e&&e.provider}},{key:"checktimeForAds",value:function(){var e=Date.now()-this.last,t=this.intervals[this.currentInterval],n=t<=e;return console.log("ADS: last: ".concat(e,", interval: ").concat(t,", show: ").concat(n)),n}},{key:"show",value:function(){console.log("ADS: manager.show"),this.chain||(this.checktimeForAds()?(this.chain=!0,this.next()):(console.log("ADS: manager.onClose"),this.onClose()))}}]),o}(),t=function(){function t(e){r(this,t),this.name=e,this.sdk=null,this.manager=null,this.onload=null}return i(t,[{key:"open",value:function(){this.manager&&this.manager.open()}},{key:"close",value:function(e){this.manager&&this.manager.close(this,e)}}]),t}(),n=new(function(e){function n(e){var t;return r(this,n),t=c(this,s(n).call(this,"gd")),function(e,t,n,o){if(!document.getElementById(e)){o&&o();var r=document.createElement("script");r.id=e,r.type="text/javascript",r.async=!0,r.src=t,r.onload=n;var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(r,i)}}("gdsdk","https://html5.api.gamedistribution.com/main.min.js",null,function(){window.GD_OPTIONS={gameId:e.gameId,advertisementSettings:e.advertisementSettings,onEvent:function(e){switch(e.name){case"SDK_GAME_START":console.log("ADS: gd event game_start, status: ".concat(e.status)),t.sdk&&t.close();break;case"SDK_GAME_PAUSE":console.log("ADS: gd event game_pause"),t.open();break;case"SDK_READY":console.log("ADS: gd event ready"),t.sdk=window.gdsdk,t.onload&&t.onload();break;case"SDK_ERROR":console.log("ADS: gd event error")}}}}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(n,t),i(n,[{key:"show",value:function(){return console.log("ADS: gd.show"),!(!this.sdk||!this.sdk.showAd)&&(this.sdk.showAd(),!0)}},{key:"banner",value:function(e){var t=this,n=this.sdk;n?n.showAd&&n.showAd(n.AdType.Display,{containerId:e}).then(function(){}).catch(function(e){}):this.onload=function(){return t.banner(e)}}}]),n}())({gameId:"6ae8a85b120248518ed90c3b54b762b1",advertisementSettings:{debug:!0,autoplay:!1,locale:"en"}}),l=new e([0,12e4,3e4]);l.addProvider(n,!0),l.onClose=function(){window.Agar.game_start()},window.ads=l,window.showBanner=function(e){return n.banner(e)}}();
