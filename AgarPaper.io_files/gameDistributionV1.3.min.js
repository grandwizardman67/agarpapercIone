/* IDHB v1.21.0 2020-06-22 14:59 */
!function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{enumerable:!0,get:d})},b.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},b.t=function(a,c){if(1&c&&(a=b(a)),8&c)return a;if(4&c&&"object"==typeof a&&a&&a.__esModule)return a;var d=Object.create(null);if(b.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:a}),2&c&&"string"!=typeof a)for(var e in a)b.d(d,e,function(b){return a[b]}.bind(null,e));return d},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=20)}([function(a,b,c){"use strict";function d(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function e(a){if("undefined"==typeof window)return"";var b=void 0;try{var c=void 0;try{c=window.top.location}catch(a){c=window.location}b=""!=c.search?n.default.parse(c.search):n.default.parse(c.hash)}catch(a){}return b&&b[a]?b[a]:""}function f(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.on,c=a.wrapperId;if("boolean"==typeof b&&(p=b),void 0===p){try{window.sessionStorage.getItem(c+"_debug")&&(p=!0)}catch(a){}void 0===p&&(p="true"===e(c+"_debug"))}return p}function g(a){if("undefined"!=typeof console&&f()){for(var b,c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];(b=console).info.apply(b,[a].concat(d))}}function h(a){return a&&"object"===(void 0===a?"undefined":k(a))&&!Array.isArray(a)}function i(){return!(!window.$sf||!window.$sf.ext)}Object.defineProperty(b,"__esModule",{value:!0});var j=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};b.checkHttpStatus=function(a){if(a.status>=200&&a.status<300)return a;var b=new Error(a.statusText);throw b.response=a,b.status=a.status,b},b.getParentUrl=function(){var a=(0,o.getRefererInfo)()||{};if(a.referer)return a.referer;var b=void 0;try{b=window.parent.location}catch(a){}return window.location!==b&&document.referrer?document.referrer:encodeURIComponent(document.location.href)},b.getParameterByName=e,b.debugMode=f,b.debugSession=function(a){var b=a.on,c=a.wrapperId;b?window.sessionStorage.setItem(c+"_debug",1):window.sessionStorage.removeItem(c+"_debug"),f({on:b,wrapperId:c})},b.logInfo=g,b.log=function(a){if("undefined"!=typeof console&&f()){for(var b,c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];(b=console).log.apply(b,[a].concat(d))}},b.logWarn=function(a){if("undefined"!=typeof console){for(var b,c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];(b=console).warn.apply(b,[a].concat(d))}},b.logError=function(a){if("undefined"!=typeof console){for(var b,c=arguments.length,d=Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];(b=console).error.apply(b,[a].concat(d))}},b.isObject=h,b.mergeDeep=function a(b,c){var e=j({},b);return h(b)&&h(c)&&Object.keys(c).forEach(function(f){h(c[f])&&f in b?e[f]=a(b[f],c[f]):j(e,d({},f,c[f]))}),e},b.loadScript=function(a){var b=document.createElement("script");if(b.async=!0,b.type="text/javascript",0===a.search("http"))b.src=a;else{var c="https:"==document.location.protocol;b.src=(c?"https:":"http:")+"//"+a}var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(b,d)},b.fireSyncs=function(a){g("Firing user syncs"),a.pixels&&a.pixels.forEach(function(a){return(new Image).src=a})},b.inASafeFrame=i,b.iabCmpExists=function(){var a=void 0;try{a=window.__cmp||window.top.__cmp}catch(a){}if("function"==typeof a)return!0;if(i()&&"function"==typeof window.$sf.ext.cmp)return!0;for(var b=window;;){try{if(b.frames.__cmpLocator)return!0}catch(a){}if(b===window.top)break;b=b.parent}return!1};var l,m=c(3),n=(l=m)&&l.__esModule?l:{default:l},o=c(15),p=void 0},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=null,f=function(){function a(){if(function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),e)return e;e=this,this.listeners={}}return d(a,[{key:"_getListenerIdx",value:function(a,b,c){var d=this.listeners[a],e=void 0,f=-1;if(!d||0===d.length)return f;for(e=0;e<d.length;e++)if(d[e].callback===b&&(!c||c===d[e].scope)){f=e;break}return f}},{key:"subscribe",value:function(a,b,c){var d;if(!a)throw new Error("Event name cannot be null or undefined.");if(!b||"function"!=typeof b)throw new Error("Listener must be of type function.");this._getListenerIdx(a,b,c)>=0||(d={callback:b,scope:c},this.listeners[a]=this.listeners[a]||[],this.listeners[a].push(d))}},{key:"broadcast",value:function(a,b){var c=this.listeners[a];a&&this.listeners[a]&&(b=b||{},c.forEach(function(a){a.callback.call(a.scope,b)}))}}]),a}();b.default=f},function(a){a.exports={EVENTS:{MODULE_CONFIG_AVAILABLE:"moduleConfigAvailable",SLOT_RENDER_ENDED:"slotRenderEnded"},HOOKS:{BIDS_BACK_HANDLER:{PRIORITY:{TUNNL:50}},INIT_AD_SERVER:{PRIORITY:{TUNNL:50}}}}},function(a,b,c){"use strict";function d(a,b){return b.encode?b.strict?g(a):encodeURIComponent(a):a}function e(a){var b=a.indexOf("?");return-1===b?"":a.slice(b+1)}function f(a,b){var c=function(a){var b;switch(a.arrayFormat){case"index":return function(a,c,d){b=/\[(\d*)\]$/.exec(a),a=a.replace(/\[\d*\]$/,""),b?(void 0===d[a]&&(d[a]={}),d[a][b[1]]=c):d[a]=c};case"bracket":return function(a,c,d){b=/(\[\])$/.exec(a),a=a.replace(/\[\]$/,""),b?void 0!==d[a]?d[a]=[].concat(d[a],c):d[a]=[c]:d[a]=c};default:return function(a,b,c){void 0!==c[a]?c[a]=[].concat(c[a],b):c[a]=b}}}(b=h({arrayFormat:"none"},b)),d=Object.create(null);return"string"!=typeof a?d:(a=a.trim().replace(/^[?#&]/,""))?(a.split("&").forEach(function(a){var b=a.replace(/\+/g," ").split("="),e=b.shift(),f=b.length>0?b.join("="):void 0;f=void 0===f?null:i(f),c(i(e),f,d)}),Object.keys(d).sort().reduce(function(a,b){var c=d[b];return Boolean(c)&&"object"==typeof c&&!Array.isArray(c)?a[b]=function a(b){return Array.isArray(b)?b.sort():"object"==typeof b?a(Object.keys(b)).sort(function(a,b){return Number(a)-Number(b)}).map(function(a){return b[a]}):b}(c):a[b]=c,a},Object.create(null))):d}var g=c(18),h=c(17),i=c(16);b.extract=e,b.parse=f,b.stringify=function(a,b){!1===(b=h({encode:!0,strict:!0,arrayFormat:"none"},b)).sort&&(b.sort=function(){});var c=function(a){switch(a.arrayFormat){case"index":return function(b,c,e){return null===c?[d(b,a),"[",e,"]"].join(""):[d(b,a),"[",d(e,a),"]=",d(c,a)].join("")};case"bracket":return function(b,c){return null===c?d(b,a):[d(b,a),"[]=",d(c,a)].join("")};default:return function(b,c){return null===c?d(b,a):[d(b,a),"=",d(c,a)].join("")}}}(b);return a?Object.keys(a).sort(b.sort).map(function(e){var f=a[e];if(void 0===f)return"";if(null===f)return d(e,b);if(Array.isArray(f)){var g=[];return f.slice().forEach(function(a){void 0!==a&&g.push(c(e,a,g.length))}),g.join("&")}return d(e,b)+"="+d(f,b)}).filter(function(a){return a.length>0}).join("&"):""},b.parseUrl=function(a,b){return{url:a.split("?")[0]||"",query:f(e(a),b)}}},function(a){a.exports={USD:{EUR:.8920606601}}},function(a){a.exports={version:"1.3.4",prebidVersion:"prebid-idhb-v3.22.min.js",disableInitialAdLoading:!0,prebid:{config:{bidderSequence:"fixed",priceGranularity:{buckets:[{precision:2,min:0,max:20,increment:.01},{precision:2,min:20,max:100,increment:.1}]},enableSendAllBids:!0,userSync:{filterSettings:{all:{bidders:"*",filter:"include"}},syncsPerBidder:5,userIds:[{name:"criteo"},{name:"id5Id",params:{partner:396},storage:{type:"cookie",name:"pbjs-id5id",expires:90,refreshInSeconds:28800}}],auctionDelay:50},currency:{adServerCurrency:"EUR"},consentManagement:{gdpr:{cmpApi:"iab",timeout:1500,allowAuctionWithoutConsent:!0},usp:{cmpApi:"iab",timeout:1500,allowAuctionWithoutConsent:!0}},cache:{url:"https://prebid.adnxs.com/pbc/v1/cache"},improvedigital:{usePrebidSizes:!0}},timeout:5e3},dfp:{networkCode:1015413},modules:{tunnl:{enabled:!0,timeout:3e3,dynamicTagId:!0}},templates:{default:{refreshRate:6e4,modules:{tunnl:{slots:["gd__banner","gd__preroll_banner"]}},prebid:{slots:{video1:{mediaTypes:{video:{context:"instream",playerSize:[640,480]}},bids:[{bidder:"improvedigital",params:{placementId:1057085,keyValues:{hb:["true"]}}},{bidder:"appnexus",params:{placementId:"14319279",video:{skippable:!0,mimes:["video/mp4","application/javascript","video/webm","video/ogg"],frameworks:[2]}}},{bidder:"smartadserver",params:{domain:"https://www8.smartadserver.com",pageId:1231630,siteId:351458,formatId:88313,video:{protocol:8,startDelay:0}}},{bidder:"openx",params:{unit:540525138,delDomain:"funtomic-d.openx.net"}},{bidder:"pubmatic",params:{publisherId:"156946",adSlot:"gamedistribution_501_PubMatic_PREROLL@0x0",video:{skippable:!0,mimes:["video/mp4","application/javascript","video/webm","video/ogg"],w:640,h:480}}}]},midroll:{mediaTypes:{video:{context:"instream",playerSize:[640,480]}},bids:[{bidder:"improvedigital",params:{placementId:22248954,keyValues:{hb:["true"]}}},{bidder:"appnexus",params:{placementId:18853211,video:{skippable:!0,mimes:["video/mp4","application/javascript","video/webm","video/ogg"],frameworks:[2]}}},{bidder:"smartadserver",params:{domain:"https://www8.smartadserver.com",pageId:1231642,siteId:351460,formatId:88313,video:{protocol:8,startDelay:0}}},{bidder:"openx",params:{unit:541019700,delDomain:"funtomic-d.openx.net"}},{bidder:"pubmatic",params:{publisherId:"156946",adSlot:"gamedistribution_501_PubMatic_MIDROLL@0x0",video:{skippable:!0,mimes:["video/mp4","application/javascript","video/webm","video/ogg"],w:640,h:480}}}]},rewardedVideo:{mediaTypes:{video:{context:"instream",playerSize:[640,480]}},bids:[{bidder:"improvedigital",params:{placementId:13303692,keyValues:{hb:["true"]}}},{bidder:"appnexus",params:{placementId:"16382831",video:{skippable:!1,mimes:["video/mp4","application/javascript","video/webm","video/ogg"],frameworks:[2]}}},{bidder:"pubmatic",params:{publisherId:"156946",adSlot:"gamedistribution_501_PubMatic_REWARDED@0x0",video:{skippable:!1,mimes:["video/mp4","application/javascript","video/webm","video/ogg"],w:640,h:480}}}]},gd__banner:{mediaTypes:{banner:{sizes:[[120,600],[160,600],[300,250],[320,480],[336,280],[728,90],[970,250]]}},bids:[{bidder:"improvedigital",params:{placementId:22130471,keyValues:{hb:["true"]}}},{bidder:"appnexus",params:{placementId:"17096682",allowSmallerSizes:!0}},{bidder:"openx",params:{unit:540864968,delDomain:"funtomic-d.openx.net"}},{bidder:"pubmatic",params:{publisherId:"156946",adSlot:"gamedistribution_display"}},{bidder:"smartadserver",params:{pageId:1231630,siteId:351458,formatId:88269}},{bidder:"33across",params:{siteId:"aZYBGeG70r6OkbaKlId8sQ",productId:"siab"}}]},gd__banner_test:{mediaTypes:{banner:{sizes:[[120,600],[160,600],[300,250],[320,480],[336,280],[728,90],[970,250]]}},bids:[]},gd__preroll_banner:{mediaTypes:{banner:{sizes:[[120,600],[160,600],[250,250],[300,250],[320,480],[336,280],[300,400],[300,600],[600,900],[728,90],[900,600],[970,90],[970,250]]}},bids:[{bidder:"improvedigital",params:{placementId:22233837,keyValues:{hb:["true"]}}},{bidder:"appnexus",params:{placementId:"18629338",allowSmallerSizes:!0}},{bidder:"openx",params:{unit:540998262,delDomain:"funtomic-d.openx.net"}},{bidder:"pubmatic",params:{publisherId:"156946",adSlot:"Gamedistribution_160x600_multi"}},{bidder:"smartadserver",params:{pageId:1231630,siteId:351458,formatId:88269}},{bidder:"33across",params:{siteId:"aZYBGeG70r6OkbaKlId8sQ",productId:"siab"}}]}}},dfp:{display:{slots:{gd__banner:{size:[[120,600],[160,600],[300,250],[320,480],[336,280],[728,90],[970,250]],collapseEmptyDiv:!0},gd__banner_test:{code:"gd_banner_test",size:[[120,600],[160,600],[300,250],[320,480],[336,280],[728,90],[970,250]],collapseEmptyDiv:!0},gd__preroll_banner:{size:[[120,600],[160,600],[250,250],[300,250],[320,480],[336,280],[300,400],[300,600],[600,900],[728,90],[900,600],[970,90],[970,250]],collapseEmptyDiv:!0}}},instream:{slots:{video1:{},midroll:{},rewardedVideo:{}}}}}}}},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};b.createHook=function(a,b,c){var g=[{fn:b,priority:0}],h={sync:function(){for(var a=this,b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];g.forEach(function(b){b.fn.apply(a,c)})},asyncSeries:function(){for(var a=this,b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];var f=0;return g[f].fn.apply(this,c.concat(function b(){for(var c=arguments.length,d=Array(c),h=0;h<c;h++)d[h]=arguments[h];var i=g[++f];if("object"===(void 0===i?"undefined":e(i))&&"function"==typeof i.fn)return i.fn.apply(a,d.concat(b))}))}};if(!h[a])throw new Error("invalid hook type");var i={addHook:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;"function"==typeof a&&(g.push({fn:a,priority:b}),g.sort(function(a,b){return b.priority-a.priority}))},removeHook:function(a){g=g.filter(function(c){return c.fn===b||c.fn!==a})},hasHook:function(a){return g.some(function(b){return b.fn===a})}};return"string"==typeof c&&(f[c]=i),d(function(){for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return 1===g.length&&g[0].fn===b?b.apply(void 0,d):h[a].apply(null,d)},i)};var f=b.hooks={}},function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(0),g=function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a)}return e(a,[{key:"initAdSlots",value:function(a){var b=a.config,c=a.idhb,d=a.isCoppa,e=a.isGdprUserUnderAge;if(!b)throw new Error("DFP config is required");this.config=b,this.idhb=c,this.isCoppa=d,this.isGdprUserUnderAge=e}},{key:"bidsBackHandler",value:function(a){var b=this,c=(a.bids,a.slotIds),e=void 0===c?null:c,g=a.pbjs,h=a.prebidSlots,i=a.personalizedAds,j=a.callback,k=a.url;if("function"==typeof j){var l={};e.forEach(function(a){var c=g.getAdserverTargetingForAdUnitCode(a),f={iu:"/"+b.config.networkCode+"/"+b.config.instream.slots[a].code,cust_params:d({},c,b.idhb.getAdserverTargetingForAdSlot(a)),description_url:k};!1===i&&(f.npa=1,f.rdp=1),!0===b.isCoppa&&(f.tfcd=1),!0===b.isGdprUserUnderAge&&(f.tfua=1);var m=g.adServers.dfp.buildVideoUrl({adUnit:h[a],params:f});1===e.length?j(m):l[a]=m,g.markWinningBidAsUsed&&g.markWinningBidAsUsed({adUnitCode:a})}),e.length>1&&j(l),(0,f.debugMode)()&&this.idhb.showAllBids()}else(0,f.logError)("Callback not provided. Cannot return vastUrl.")}}]),a}();b.default=g},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(b,"__esModule",{value:!0});var e=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=c(0),h=d(c(2)),i=new(d(c(1)).default),j=function(){function a(b){var c=this,d=b.idhb,e=b.loadGPT;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.gptSlotObjects={},this.idhb=d,window.googletag=window.googletag||{},this.googletag=window.googletag,this.googletag.cmd=this.googletag.cmd||[],this.googletag.cmd.push(function(){c.googletag.pubads().disableInitialLoad()}),e&&(0,g.loadScript)("www.googletagservices.com/tag/js/gpt.js")}return f(a,[{key:"initAdSlots",value:function(a){var b=this,c=a.config,d=a.hbOptions,f=a.hbResultTracker,j=a.isCoppa,k=a.isGdprUserUnderAge;if(!c)throw new Error("DFP config is required");this.config=c,c.disableInitialization?(0,g.logInfo)("DFP/GPT initialization is disabled"):(this.isCoppa=j,this.isGdprUserUnderAge=k,this.googletag.cmd.push(function(){!0===b.isCoppa&&b.googletag.pubads().setTagForChildDirectedTreatment(1),!0===b.isGdprUserUnderAge&&b.googletag.pubads().setTagForUnderAgeOfConsent(1),b.googletag.pubads().addEventListener("slotRenderEnded",function(a){i.broadcast(h.default.EVENTS.SLOT_RENDER_ENDED,{slotId:a.slot.getSlotElementId(),isEmpty:a.isEmpty})});var a={};if(void 0!==c.display.sizeMappings)for(var g in c.display.sizeMappings)if(c.display.sizeMappings.hasOwnProperty(g)){a[g]=b.googletag.sizeMapping();for(var j=c.display.sizeMappings[g],k=0,l=j.length;k<l;k++){var m=j[k];a[g]=a[g].addSize(m[0],m[1])}a[g]=a[g].build()}var n=[];Object.keys(c.display.slots).forEach(function(f){var g=e({},c.display.slots[f]);if(!d.selectedAds||d.selectedAds.indexOf(f)>=0||d.selectedAds.indexOf(g.code)>=0){var h=b.googletag.defineSlot("/"+c.networkCode+"/"+g.code,g.size,f);g.collapseEmptyDiv&&h.setCollapseEmptyDiv(!0,!0),void 0!==g.sizeMappingId&&h.defineSizeMapping(a[g.sizeMappingId]);var i=b.idhb.getAdserverTargetingForAdSlot(f);Object.keys(i).forEach(function(a){return h.setTargeting(a,i[a])}),h.addService(b.googletag.pubads()),b.gptSlotObjects[f]=h,n.push(h)}}),d.debug&&b.googletag.pubads().addEventListener("slotRenderEnded",function(a){var b=a.slot.getSlotElementId();console.log("Slot has been rendered: "+b),console.log(f),f.hasOwnProperty(b)||(f[b]="DFP"),console.log(b+" ad belongs to: "+f[b])});var o=[];void 0!==c.display.nonHbSlots&&Object.keys(c.display.nonHbSlots).forEach(function(a){var d=c.display.nonHbSlots[a],e=b.googletag.defineSlot("/"+c.networkCode+"/"+d.code,d.size,a).addService(b.googletag.pubads());d.collapseEmptyDiv&&e.setCollapseEmptyDiv(!0,!0);var f=b.idhb.getAdserverTargetingForAdSlot(a);Object.keys(f).forEach(function(a){return e.setTargeting(a,f[a])}),b.gptSlotObjects[a]=e,o.push(e)}),c.enableSingleRequest&&b.googletag.pubads().enableSingleRequest(),b.googletag.enableServices(),d.setTargeting(),n.concat(o).forEach(function(a){try{b.googletag.display(a.getSlotElementId())}catch(a){console.log(a)}})}),this.initComplete=!0)}},{key:"initGptAdSlot",value:function(){var a=this,b=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).id;this.initComplete&&(this.config&&!this.config.disableInitialization?this.googletag.cmd.push(function(){var c=void 0;a.gptSlotObjects[b]&&a.googletag.destroySlots([a.gptSlotObjects[b]]),c=a.config.display.slots&&a.config.display.slots[b]?a.config.display.slots[b]:a.config.display.nonHbSlots[b];var d=a.googletag.defineSlot("/"+a.config.networkCode+"/"+c.code,c.size,b);c.collapseEmptyDiv&&d.setCollapseEmptyDiv(!0,!0),void 0!==c.sizeMappingId&&d.defineSizeMapping(a.sizeMappings[c.sizeMappingId]);var e=a.idhb.getAdserverTargetingForAdSlot(b);Object.keys(e).forEach(function(a){return d.setTargeting(a,e[a])}),d.addService(a.googletag.pubads()),a.googletag.display(b),a.gptSlotObjects[b]=d}):(0,g.logInfo)("DFP/GPT initialization is disabled"))}},{key:"bidsBackHandler",value:function(a){var b=this,c=a.slotIds,d=a.nonHbSlotIds,e=a.pbjs,f=a.personalizedAds,h=a.callback,i=a.dfpRefresh;(0,g.logInfo)("Running bidsBackHandler() for slots "+JSON.stringify(c)),this.googletag.cmd.push(function(){e.que.push(function(){c.forEach(function(a){var c=a;a.indexOf("@")>0&&(c=a.substring(0,a.indexOf("@")));var d=b.idhb.getAdserverTargetingForAdSlot(c);Object.keys(d).forEach(function(c){return b.gptSlotObjects[a].setTargeting(c,d[c])})}),e.setTargetingForGPTAsync(c),!1===f?(b.googletag.pubads().setRequestNonPersonalizedAds(1),b.googletag.pubads().setPrivacySettings({restrictDataProcessing:!0})):b.googletag.pubads().setRequestNonPersonalizedAds(0),h&&h({slotIds:c}),i&&b.refreshSlots({slotIds:c})}),i&&b.refreshSlots({slotIds:d})})}},{key:"refreshSlots",value:function(){var a=this,b=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).slotIds;b&&0!==b.length&&((0,g.logInfo)("Refreshing slots "+JSON.stringify(b)),this.googletag.cmd.push(function(){a.googletag.pubads().refresh(b.map(function(b){return a.gptSlotObjects[b]}))}))}}]),a}();b.default=j},function(a,b){!function(a){"use strict";function b(a){if("string"!=typeof a&&(a=String(a)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(a))throw new TypeError("Invalid character in header field name");return a.toLowerCase()}function c(a){return"string"!=typeof a&&(a=String(a)),a}function d(a){var b={next:function(){var b=a.shift();return{done:void 0===b,value:b}}};return n.iterable&&(b[Symbol.iterator]=function(){return b}),b}function e(a){this.map={},a instanceof e?a.forEach(function(a,b){this.append(b,a)},this):Array.isArray(a)?a.forEach(function(a){this.append(a[0],a[1])},this):a&&Object.getOwnPropertyNames(a).forEach(function(b){this.append(b,a[b])},this)}function f(a){if(a.bodyUsed)return Promise.reject(new TypeError("Already read"));a.bodyUsed=!0}function g(a){return new Promise(function(b,c){a.onload=function(){b(a.result)},a.onerror=function(){c(a.error)}})}function h(a){var b=new FileReader,c=g(b);return b.readAsArrayBuffer(a),c}function i(a){if(a.slice)return a.slice(0);var b=new Uint8Array(a.byteLength);return b.set(new Uint8Array(a)),b.buffer}function j(){return this.bodyUsed=!1,this._initBody=function(a){if(this._bodyInit=a,a)if("string"==typeof a)this._bodyText=a;else if(n.blob&&Blob.prototype.isPrototypeOf(a))this._bodyBlob=a;else if(n.formData&&FormData.prototype.isPrototypeOf(a))this._bodyFormData=a;else if(n.searchParams&&URLSearchParams.prototype.isPrototypeOf(a))this._bodyText=a.toString();else if(n.arrayBuffer&&n.blob&&p(a))this._bodyArrayBuffer=i(a.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!n.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(a)&&!q(a))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=i(a)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof a?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n.searchParams&&URLSearchParams.prototype.isPrototypeOf(a)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n.blob&&(this.blob=function(){var a=f(this);if(a)return a;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(h)}),this.text=function(){var a,b,c,d=f(this);if(d)return d;if(this._bodyBlob)return a=this._bodyBlob,b=new FileReader,c=g(b),b.readAsText(a),c;if(this._bodyArrayBuffer)return Promise.resolve(function(a){for(var b=new Uint8Array(a),c=new Array(b.length),d=0;d<b.length;d++)c[d]=String.fromCharCode(b[d]);return c.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(l)}),this.json=function(){return this.text().then(JSON.parse)},this}function k(a,b){var c,d,f=(b=b||{}).body;if(a instanceof k){if(a.bodyUsed)throw new TypeError("Already read");this.url=a.url,this.credentials=a.credentials,b.headers||(this.headers=new e(a.headers)),this.method=a.method,this.mode=a.mode,f||null==a._bodyInit||(f=a._bodyInit,a.bodyUsed=!0)}else this.url=String(a);if(this.credentials=b.credentials||this.credentials||"omit",!b.headers&&this.headers||(this.headers=new e(b.headers)),this.method=(c=b.method||this.method||"GET",d=c.toUpperCase(),r.indexOf(d)>-1?d:c),this.mode=b.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&f)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(f)}function l(a){var b=new FormData;return a.trim().split("&").forEach(function(a){if(a){var c=a.split("="),d=c.shift().replace(/\+/g," "),e=c.join("=").replace(/\+/g," ");b.append(decodeURIComponent(d),decodeURIComponent(e))}}),b}function m(a,b){b||(b={}),this.type="default",this.status=void 0===b.status?200:b.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in b?b.statusText:"OK",this.headers=new e(b.headers),this.url=b.url||"",this._initBody(a)}if(!a.fetch){var n={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch(a){return!1}}(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};if(n.arrayBuffer)var o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],p=function(a){return a&&DataView.prototype.isPrototypeOf(a)},q=ArrayBuffer.isView||function(a){return a&&o.indexOf(Object.prototype.toString.call(a))>-1};e.prototype.append=function(a,d){a=b(a),d=c(d);var e=this.map[a];this.map[a]=e?e+","+d:d},e.prototype.delete=function(a){delete this.map[b(a)]},e.prototype.get=function(a){return a=b(a),this.has(a)?this.map[a]:null},e.prototype.has=function(a){return this.map.hasOwnProperty(b(a))},e.prototype.set=function(a,d){this.map[b(a)]=c(d)},e.prototype.forEach=function(a,b){for(var c in this.map)this.map.hasOwnProperty(c)&&a.call(b,this.map[c],c,this)},e.prototype.keys=function(){var a=[];return this.forEach(function(b,c){a.push(c)}),d(a)},e.prototype.values=function(){var a=[];return this.forEach(function(b){a.push(b)}),d(a)},e.prototype.entries=function(){var a=[];return this.forEach(function(b,c){a.push([c,b])}),d(a)},n.iterable&&(e.prototype[Symbol.iterator]=e.prototype.entries);var r=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];k.prototype.clone=function(){return new k(this,{body:this._bodyInit})},j.call(k.prototype),j.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new e(this.headers),url:this.url})},m.error=function(){var a=new m(null,{status:0,statusText:""});return a.type="error",a};var s=[301,302,303,307,308];m.redirect=function(a,b){if(-1===s.indexOf(b))throw new RangeError("Invalid status code");return new m(null,{status:b,headers:{location:a}})},a.Headers=e,a.Request=k,a.Response=m,a.fetch=function(a,b){return new Promise(function(c,d){var f=new k(a,b),g=new XMLHttpRequest;g.onload=function(){var a,b,d={status:g.status,statusText:g.statusText,headers:(a=g.getAllResponseHeaders()||"",b=new e,a.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(a){var c=a.split(":"),d=c.shift().trim();if(d){var e=c.join(":").trim();b.append(d,e)}}),b)};d.url="responseURL"in g?g.responseURL:d.headers.get("X-Request-URL");var f="response"in g?g.response:g.responseText;c(new m(f,d))},g.onerror=function(){d(new TypeError("Network request failed"))},g.ontimeout=function(){d(new TypeError("Network request failed"))},g.open(f.method,f.url,!0),"include"===f.credentials?g.withCredentials=!0:"omit"===f.credentials&&(g.withCredentials=!1),"responseType"in g&&n.blob&&(g.responseType="blob"),f.headers.forEach(function(a,b){g.setRequestHeader(b,a)}),g.send(void 0===f._bodyInit?null:f._bodyInit)})},a.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(a,b){var c;c=function(){return this}();try{c=c||Function("return this")()||(0,eval)("this")}catch(a){"object"==typeof window&&(c=window)}a.exports=c},function(a,b){function c(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}function e(a){if(j===setTimeout)return setTimeout(a,0);if((j===c||!j)&&setTimeout)return j=setTimeout,setTimeout(a,0);try{return j(a,0)}catch(b){try{return j.call(null,a,0)}catch(b){return j.call(this,a,0)}}}function f(){o&&m&&(o=!1,m.length?n=m.concat(n):p=-1,n.length&&g())}function g(){if(!o){var a=e(f);o=!0;for(var b=n.length;b;){for(m=n,n=[];++p<b;)m&&m[p].run();p=-1,b=n.length}m=null,o=!1,function(a){if(k===clearTimeout)return clearTimeout(a);if((k===d||!k)&&clearTimeout)return k=clearTimeout,clearTimeout(a);try{k(a)}catch(b){try{return k.call(null,a)}catch(b){return k.call(this,a)}}}(a)}}function h(a,b){this.fun=a,this.array=b}function i(){}var j,k,l=a.exports={};!function(){try{j="function"==typeof setTimeout?setTimeout:c}catch(a){j=c}try{k="function"==typeof clearTimeout?clearTimeout:d}catch(a){k=d}}();var m,n=[],o=!1,p=-1;l.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];n.push(new h(a,b)),1!==n.length||o||e(g)},h.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=i,l.addListener=i,l.once=i,l.off=i,l.removeListener=i,l.removeAllListeners=i,l.emit=i,l.prependListener=i,l.prependOnceListener=i,l.listeners=function(a){return[]},l.binding=function(a){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(a){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(a,b,c){(function(b,c){var d;d=function(){"use strict";function a(a){return"function"==typeof a}function d(){var a=setTimeout;return function(){return a(e,1)}}function e(){for(var a=0;a<x;a+=2)(0,G[a])(G[a+1]),G[a]=void 0,G[a+1]=void 0;x=0}function f(a,b){var c=this,d=new this.constructor(h);void 0===d[I]&&r(d);var e=c._state;if(e){var f=arguments[e-1];A(function(){return q(e,d,f,c._result)})}else o(c,d,a,b);return d}function g(a){if(a&&"object"==typeof a&&a.constructor===this)return a;var b=new this(h);return k(b,a),b}function h(){}function i(a){try{return a.then}catch(a){return M.error=a,M}}function j(b,c,d){c.constructor===b.constructor&&d===f&&c.constructor.resolve===g?function(a,b){b._state===K?m(a,b._result):b._state===L?n(a,b._result):o(b,void 0,function(b){return k(a,b)},function(b){return n(a,b)})}(b,c):d===M?(n(b,M.error),M.error=null):void 0===d?m(b,c):a(d)?function(a,b,c){A(function(a){var d=!1,e=function(a,b,c,d){try{a.call(b,c,d)}catch(a){return a}}(c,b,function(c){d||(d=!0,b!==c?k(a,c):m(a,c))},function(b){d||(d=!0,n(a,b))},a._label);!d&&e&&(d=!0,n(a,e))},a)}(b,c,d):m(b,c)}function k(a,b){var c,d;a===b?n(a,new TypeError("You cannot resolve a promise with itself")):(d=typeof(c=b),null===c||"object"!==d&&"function"!==d?m(a,b):j(a,b,i(b)))}function l(a){a._onerror&&a._onerror(a._result),p(a)}function m(a,b){a._state===J&&(a._result=b,a._state=K,0!==a._subscribers.length&&A(p,a))}function n(a,b){a._state===J&&(a._state=L,a._result=b,A(l,a))}function o(a,b,c,d){var e=a._subscribers,f=e.length;a._onerror=null,e[f]=b,e[f+K]=c,
e[f+L]=d,0===f&&a._state&&A(p,a)}function p(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d=void 0,e=void 0,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?q(c,d,e,f):e(f);a._subscribers.length=0}}function q(b,c,d,e){var f=a(d),g=void 0,h=void 0,i=void 0,j=void 0;if(f){if((g=function(a,b){try{return a(b)}catch(a){return M.error=a,M}}(d,e))===M?(j=!0,h=g.error,g.error=null):i=!0,c===g)return void n(c,new TypeError("A promises callback cannot return that same promise."))}else g=e,i=!0;c._state!==J||(f&&i?k(c,g):j?n(c,h):b===K?m(c,g):b===L&&n(c,g))}function r(a){a[I]=N++,a._state=void 0,a._result=void 0,a._subscribers=[]}var s,t,u,v,w=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},x=0,y=void 0,z=void 0,A=function(a,b){G[x]=a,G[x+1]=b,2===(x+=2)&&(z?z(e):H())},B="undefined"!=typeof window?window:void 0,C=B||{},D=C.MutationObserver||C.WebKitMutationObserver,E="undefined"==typeof self&&void 0!==b&&"[object process]"==={}.toString.call(b),F="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,G=new Array(1e3),H=void 0;E?H=function(){return b.nextTick(e)}:D?(t=0,u=new D(e),v=document.createTextNode(""),u.observe(v,{characterData:!0}),H=function(){v.data=t=++t%2}):F?((s=new MessageChannel).port1.onmessage=e,H=function(){return s.port2.postMessage(0)}):H=void 0===B?function(){try{var a=Function("return this")().require("vertx");return void 0!==(y=a.runOnLoop||a.runOnContext)?function(){y(e)}:d()}catch(a){return d()}}():d();var I=Math.random().toString(36).substring(2),J=void 0,K=1,L=2,M={error:null},N=0,O=function(){function a(a,b){this._instanceConstructor=a,this.promise=new a(h),this.promise[I]||r(this.promise),w(b)?(this.length=b.length,this._remaining=b.length,this._result=new Array(this.length),0===this.length?m(this.promise,this._result):(this.length=this.length||0,this._enumerate(b),0===this._remaining&&m(this.promise,this._result))):n(this.promise,new Error("Array Methods must be provided an Array"))}return a.prototype._enumerate=function(a){for(var b=0;this._state===J&&b<a.length;b++)this._eachEntry(a[b],b)},a.prototype._eachEntry=function(a,b){var c=this._instanceConstructor,d=c.resolve;if(d===g){var e=i(a);if(e===f&&a._state!==J)this._settledAt(a._state,b,a._result);else if("function"!=typeof e)this._remaining--,this._result[b]=a;else if(c===P){var k=new c(h);j(k,a,e),this._willSettleAt(k,b)}else this._willSettleAt(new c(function(b){return b(a)}),b)}else this._willSettleAt(d(a),b)},a.prototype._settledAt=function(a,b,c){var d=this.promise;d._state===J&&(this._remaining--,a===L?n(d,c):this._result[b]=c),0===this._remaining&&m(d,this._result)},a.prototype._willSettleAt=function(a,b){var c=this;o(a,void 0,function(a){return c._settledAt(K,b,a)},function(a){return c._settledAt(L,b,a)})},a}(),P=function(){function a(b){this[I]=N++,this._result=this._state=void 0,this._subscribers=[],h!==b&&("function"!=typeof b&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof a?function(a,b){try{b(function(b){k(a,b)},function(b){n(a,b)})}catch(b){n(a,b)}}(this,b):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return a.prototype.catch=function(a){return this.then(null,a)},a.prototype.finally=function(a){var b=this.constructor;return this.then(function(c){return b.resolve(a()).then(function(){return c})},function(c){return b.resolve(a()).then(function(){throw c})})},a}();return P.prototype.then=f,P.all=function(a){return new O(this,a).promise},P.race=function(a){var b=this;return new b(w(a)?function(c,d){for(var e=a.length,f=0;f<e;f++)b.resolve(a[f]).then(c,d)}:function(a,b){return b(new TypeError("You must pass an array to race."))})},P.resolve=g,P.reject=function(a){var b=new this(h);return n(b,a),b},P._setScheduler=function(a){z=a},P._setAsap=function(a){A=a},P._asap=A,P.polyfill=function(){var a=void 0;if(void 0!==c)a=c;else if("undefined"!=typeof self)a=self;else try{a=Function("return this")()}catch(a){throw new Error("polyfill failed because global object is unavailable in this environment")}var b=a.Promise;if(b){var d=null;try{d=Object.prototype.toString.call(b.resolve())}catch(a){}if("[object Promise]"===d&&!b.cast)return}a.Promise=P},P.Promise=P,P},a.exports=d()}).call(this,c(11),c(10))},function(a,b,c){"use strict";a.exports=c(12).polyfill()},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.slotIds,c=a.callback,d=a.dfpRefresh,i=void 0===d||d,j=a.slots,k=a.intervalId;if(j&&(b=b||[],Object.keys(j).forEach(function(a){-1===b.indexOf(a)&&b.push(a)})),o.logInfo("requestBids()",b,j),x||(function(){J._url=J._url||o.getParentUrl(),E.setAdserverTargeting({hbw_url:decodeURIComponent(J._url).replace("https://","").replace("http://","")}),void 0!==J.prebid.config.currency&&(J.prebid.config.currency.rates=q.default);var a=Object.keys(J.prebid.slots).map(function(a){var b=J.prebid.slots[a];b.code=a;var c=E.getAdserverTargetingForAdSlot(a)["id_pid_"+a];return b.bids&&c&&b.bids.forEach(function(a){"improvedigital"===a.bidder&&(o.logInfo("Setting Improve placement ID to "+c),a.params.placementId=parseInt(c))}),H.gameId&&b.bids&&b.bids.forEach(function(a){"improvedigital"===a.bidder&&(a.params.keyValues=a.params.keyValues||{},a.params.keyValues.gdGameId=[H.gameId])}),b}).filter(function(a){return!H.selectedAds||-1!==H.selectedAds.indexOf(a.code)});o.log("Prebid ad units: ",a),E.initAdServer({config:J.dfp,hbOptions:H,hbResultTracker:w,idhb:E,isCoppa:J._isCoppa,isGdprUserUnderAge:J._isGdprUserUnderAgeOfConsent}),F.que.push(function(){J.prebid.bidderAliases&&J.prebid.bidderAliases.forEach(function(a){return F.aliasBidder(a[0],a[1])}),F.addAdUnits(a);var b=h(J.prebid.config,{debug:o.debugMode()});"boolean"==typeof J._isCoppa&&(b.coppa=J._isCoppa),F.setConfig(b),void 0!==J.prebid.analytics&&J.prebid.analytics.forEach(function(a){return F.enableAnalytics(a)}),o.debugMode()&&F.onEvent("bidWon",function(a){o.log("bidWon for slot: "+a.adUnitCode+" ("+a.width+"x"+a.height+") by bidder: "+a.bidderCode+" ecpm: "+a.cpm),w[a.adUnitCode]=a.bidderCode})}),E.syncUsers()}(),J._slotRefreshIntervalIds=D,x=!0),b&&b.forEach(function(a){if(!J.prebid.slots[a]){if(!(a.indexOf("@")>0))throw new Error("Invalid slot ID '"+a+"'");var b=a.substring(0,a.indexOf("@"));E.duplicateAdSlot({sourceId:b,newId:a})}}),k&&b.length>0){var l=b.filter(function(a){return null===document.getElementById(a)});if(l.length>0){o.logInfo("Automatic ad loading stopped for slot(s) "+JSON.stringify(l)+" because some of the div elements were not found"),window.clearInterval(k);var m=b.filter(function(a){return!f(a)||(o.logInfo("Automated refresh won't be set for video slot '"+a+"'"),!1)}),n=JSON.stringify(m);return void delete D[n]}}if(!k&&J.refreshRate&&J.refreshRate>0){var p=b.filter(function(a){return!f(a)||(o.logInfo("Automated refresh won't be set for video slot '"+a+"'"),!1)});if(p.length>0){var r=null;j&&(r=Object.keys(j).filter(function(a){return!f(a)}).reduce(function(a,b){return a[b]=j[b],a},{}));var s=JSON.stringify(p);D[s]&&(o.logInfo("Clearing automated refresh for slot(s) '"+s+"'"),window.clearInterval(D[s])),D[s]=window.setInterval(function(){e({slotIds:p,callback:c,dfpRefresh:i,slots:r,intervalId:D[s]})},J.refreshRate),o.logInfo("Automated refresh of "+J.refreshRate/1e3+"s initialized for slot(s) '"+s+"'")}}var y=void 0,z=void 0;if(b?Object.keys(M).length>0?(y=b.filter(function(a){return!M[a]}),z=b.filter(function(a){return M[a]})):y=b:(y=Object.keys(L),Object.keys(M).length>0&&(z=Object.keys(M))),!j||(Object.keys(j).forEach(function(a){if(j[a].maxSize&&Array.isArray(j[a].maxSize)){var b=g(j[a].maxSize,2),c=b[0],d=b[1],e=t.filter(function(a){var b=g(a,2),e=b[0],f=b[1];return e<=c&&f<=d});if(0===e.length)return y=y.filter(function(b){return b!==a}),void o.logWarn("No fitting size found for slot '"+a+"' with max ad size "+c+"x"+d);o.logInfo("Ad with max size "+c+"x"+d+" was requested for slot '"+a+"'. Following sizes fit in: "+JSON.stringify(e)),JSON.stringify(J.dfp.display.slots[a].size)!==JSON.stringify(e)&&(J.dfp.display.slots[a].size=e,u.initGptAdSlot({id:a}),F.que.push(function(){F.removeAdUnit(a),J.prebid.slots[a].mediaTypes.banner.sizes=e,F.addAdUnits(J.prebid.slots[a])}))}else if(j[a].sizes&&Array.isArray(j[a].sizes)){var f=j[a].sizes;o.logInfo("Sizes to be requested for slot '"+a+"': "+JSON.stringify(f)),J.dfp.display.slots[a]?(J.dfp.display.slots[a].size=f,u.initGptAdSlot({id:a})):J.dfp.display.nonHbSlots[a]&&(J.dfp.display.nonHbSlots[a].size=f,u.initGptAdSlot({id:a})),J.prebid.slots[a]&&F.que.push(function(){F.removeAdUnit(a),J.prebid.slots[a].mediaTypes.banner.sizes=f,F.addAdUnits(J.prebid.slots[a])})}}),0!==y.length)){var A={bidsBackHandler:function(a){E.bidsBackHandler({bids:a,dfpDisplay:u,dfpInstreamVideo:v,slotIds:y,nonHbSlotIds:z,pbjs:F,prebidSlots:J.prebid.slots,personalizedAds:H.personalizedAds,callback:c,dfpRefresh:i,url:J._url})},timeout:J.prebid.timeout};A.adUnitCodes=y,F.que.push(function(){F.requestBids(A)})}}function f(a){var b=J.prebid.slots[a];if(b){if(b.mediaTypes)return!(!b.mediaTypes.video||"instream"!==b.mediaTypes.video.context);o.logError("'mediaTypes' config not found for slot "+a)}else o.logError("Slot '"+a+"' not found")}var g=function(){return function(a,b){if(Array.isArray(a))return a;if(Symbol.iterator in Object(a))return function(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(a){e=!0,f=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw f}}return c}(a,b);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a};c(13),c(9);var i=d(c(2)),j=d(c(8)),k=d(c(7)),l=d(c(1)),m=c(6),n=d(c(3)),o=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b.default=a,b}(c(0)),p=d(c(5)),q=d(c(4)),r="hb.improvedigital.com/pbw/prebid",s=i.default.EVENTS.MODULE_CONFIG_AVAILABLE,t=[[120,600],[160,600],[250,250],[300,250],[320,480],[336,280],[300,400],[300,600],[600,900],[728,90],[900,600],[970,90],[970,250]],u=null,v=null,w={},x=!1,y=void 0,z=new l.default,A=p.default;A.id=A.id||"";var B="idhb"+A.id,C="pbjsidhb"+A.id,D={};o.debugMode({on:A.debug,wrapperId:B}),window[B]=window[B]||{};var E=window[B];E.que=E.que||[],E.modules=E.modules||{},window[C]=window[C]||{};var F=window[C];F.que=F.que||[];var G=document.getElementById(B);G&&(y=n.default.parseUrl(G.src).query),y&&void 0!==y.debug&&o.debugSession({on:!0,wrapperId:B});var H=h({template:"default",personalizedAds:!0,setTargeting:function(){}},window["HB_OPTIONS"+A.id]||window.HB_OPTIONSgd||{});y&&y.t&&(H.template=y.t),o.log("HB_OPTIONS: ",H);var I=A.templates[H.template];if(void 0===I)throw new Error("Configuration not found for template '"+H.template+"'");var J=o.mergeDeep(A,I);delete J.templates,o.log("%c %c %c Improve Digital Prebid Wrapper Debug Mode %c %c %c","background: #E57373","background: #EF5350","color: #fff; background: #E53935","background: #EF5350","background: #E57373","background: #ffffff");var K="";"string"==typeof J.prebidVersion?(K=J.prebidVersion.search("/")>=0?"":r+"/",K+=J.prebidVersion):K=r+"/prebid.min.js",o.loadScript(K),E.bidsBackHandler=(0,m.createHook)("asyncSeries",function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.bids,c=a.dfpDisplay,d=a.dfpInstreamVideo,e=a.slotIds,f=a.nonHbSlotIds,g=a.pbjs,h=a.prebidSlots,i=a.personalizedAds,j=a.callback,k=a.dfpRefresh,l=a.url;if(o.logInfo("idhb.bidsBackHandler()"),w={},d){var m=e.filter(function(a){return J.dfp.instream.slots[a]});m.length>0&&d.bidsBackHandler({bids:b,slotIds:m,pbjs:g,prebidSlots:h,personalizedAds:i,callback:j,url:l})}if(c){var n=e.filter(function(a){return J.dfp.display.slots[a]});n.length>0&&c.bidsBackHandler({bids:b,slotIds:n,nonHbSlotIds:f,pbjs:g,personalizedAds:i,callback:j,dfpRefresh:k})}}),E.initAdServer=(0,m.createHook)("asyncSeries",function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.logInfo("idhb.initAdServer()"),u&&u.initAdSlots(a),v&&v.initAdSlots(a)}),E.duplicateAdSlot=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.sourceId,c=a.newId;J.prebid.slots[b]?J.prebid.slots[c]?o.logInfo("Slot with ID '"+c+"' already exists"):(J.prebid.slots[c]=JSON.parse(JSON.stringify(J.prebid.slots[b])),J.prebid.slots[c].code=c,J.dfp.display&&J.dfp.display.slots?J.dfp.display.slots[b]?(J.dfp.display.slots[c]=JSON.parse(JSON.stringify(J.dfp.display.slots[b])),L[c]=J.dfp.display.slots[c],u.initGptAdSlot({id:c})):J.dfp.display.nonHbSlots&&J.dfp.display.nonHbSlots[b]&&(J.dfp.display.nonHbSlots[c]=JSON.parse(JSON.stringify(J.dfp.display.nonHbSlots[b])),M[c]=J.dfp.display.nonHbSlots[c],u.initGptAdSlot({id:c})):J.dfp.video&&J.dfp.video.slots&&J.dfp.video.slots[b]&&(J.dfp.video.slots[c]=JSON.parse(JSON.stringify(J.dfp.video.slots[b])),L[c]=J.dfp.video.slots[c]),N=h({},L,M),x&&F.que.push(function(){return F.addAdUnits(J.prebid.slots[c])}),o.logInfo("Slot '"+b+"' has been duplicated. New ID: '"+c+"'")):o.logError("Unknown slot ID '"+b+"'")},J._targeting={},E.setAdserverTargetingForAdSlot=function(a,b){"string"!=typeof a||""!==a&&!N[a]?o.logError("Invalid slotId '"+a+"'"):o.isObject(b)?(J._targeting[a]=J._targeting[a]||{},h(J._targeting[a],b)):o.logError("'keyValuesObj' argument must be an object")},E.setAdserverTargeting=function(a){return E.setAdserverTargetingForAdSlot("",a)},E.getAdserverTargetingForAdSlot=function(a){return h({},J._targeting[""],J._targeting[a])},E.setAdserverTargeting({hbw_pbjs:C}),E.setDfpAdUnitCodeForAdSlot=function(a,b){"string"!=typeof a||""!==a&&!N[a]?o.logError("Invalid slotId '"+a+"'"):"string"==typeof b&&0!==b.length?(J.dfp.display&&(Object.keys(J.dfp.display.slots).forEach(function(c){""!==a&&c!==a||(J.dfp.display.slots[c].code=b,o.logInfo("DFP ad unit code for slot '"+c+"' set to '"+b+"'"))}),J.dfp.display.nonHbSlots&&Object.keys(J.dfp.display.nonHbSlots).forEach(function(c){""!==a&&c!==a||(J.dfp.display.nonHbSlots[c].code=b,o.logInfo("DFP ad unit code for slot '"+c+"' set to '"+b+"'"))})),J.dfp.instream&&Object.keys(J.dfp.instream.slots).forEach(function(c){""!==a&&c!==a||(J.dfp.instream.slots[c].code=b,o.logInfo("DFP ad unit code for slot '"+c+"' set to '"+b+"'"))})):o.logError("Invalid adUnitCode '"+b+"'")},E.setDfpAdUnitCode=function(a){return E.setDfpAdUnitCodeForAdSlot("",a)},E.setRefererUrl=function(a){"string"==typeof a&&a.length>0?(o.logInfo("Setting referer to "+a),J._url=a):o.logWarn("Invalid referrer: "+a)},E.allowPersonalizedAds=function(a){"boolean"==typeof a?H.personalizedAds=a:o.logWarn("allowPersonalizedAds(): true/false argument expected")},E.setDefaultGdprConsentString=function(a){J.prebid.config.consentManagement?o.iabCmpExists()?o.logInfo("CMP found. Ignoring default consent string"):(o.logInfo("CMP not found. Using consent string: "+a),E.setStaticGdprConsentString(a)):o.logWarn("Prebid consent management module not configured")},E.setStaticGdprConsentString=function(a){J.prebid.config.consentManagement?(J.prebid.config.consentManagement.cmpApi="static",J.prebid.config.consentManagement.consentData={getConsentData:{gdprApplies:!0,hasGlobalScope:!1,consentData:a},getVendorConsents:{gdprApplies:!0,metadata:a}}):o.logWarn("Prebid consent management module not configured")},E.setGdprUserUnderAgeOfConsent=function(a){"boolean"==typeof a?J._isGdprUserUnderAgeOfConsent=a:o.logError("setGdprUserUnderAgeOfConsent(): true/false argument expected")},E.setCoppa=function(a){"boolean"==typeof a?J._isCoppa=a:o.logError("setCoppa(): true/false argument expected")},E.iabCmpExists=function(){return o.iabCmpExists()},E.addEventListener=function(a,b){z.subscribe(a,b)},E.onImaEvent=function(a){o.logInfo("IMA event '"+a.type+"' received")},y&&y.npa&&E.allowPersonalizedAds("1"!==y.npa);var L=h({},J.dfp&&J.dfp.display&&J.dfp.display.slots,J.dfp&&J.dfp.instream&&J.dfp.instream.slots),M=h({},J.dfp&&J.dfp.display&&J.dfp.display.nonHbSlots),N=h({},L,M);z.broadcast(s,{modulesConfig:J.modules||{},dfpSlots:N,templateName:H.template,selectedAds:H.selectedAds,gameId:H.gameId,idhb:E,pbjs:F}),J.dfp&&(J.dfp.display&&(u=new j.default({idhb:E,loadGPT:!J.dfp.disableInitialization})),J.dfp.instream&&(v=new k.default)),J.disableInitialAdLoading||E.que.push(function(){return e()}),E.requestAds=e,E.showAllBids=function(){var a=F.getBidResponses(),b=F.getAllWinningBids(),c=[];if(Object.keys(a).forEach(function(d){a[d].bids.forEach(function(a){c.push({bid:a,adunit:d,adId:a.adId,bidder:a.bidder,time:a.timeToRespond,cpm:a.cpm,msg:a.statusMessage,rendered:!!b.find(function(b){return b.adId===a.adId})})})}),c.length)if(console.table)console.table(c);else for(var d=0;d<c.length;d++)console.log(c[d]);else{var e="No bids from HB bidders";console.table?console.table([{msg:e}]):console.warn(e)}},E.showAllWinningBids=function(){for(var a=F.getHighestCpmBids(),b=[],c=0;c<a.length;c++){var d=a[c];b.push({adunit:d.adUnitCode,adId:d.adId,bidder:d.bidder,time:d.timeToRespond,cpm:d.cpm})}if(b.length)if(console.table)console.table(b);else for(var e=0;e<b.length;e++)console.log(b[e]);else console.warn("No prebid winners")},E.debug=function(){var a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return o.debugSession({on:a,wrapperId:B})},E.getConfig=function(){return J},E.syncUsers=function(){if(J.userSync){var a=void 0===J.userSync.syncDelay?3e3:J.userSync.syncDelay;if(a>0)return setTimeout(function(){return o.fireSyncs(J.userSync)},a);o.fireSyncs(J.userSync)}},E.queuePointer=E.queuePointer||0,E.isRunningQueuedFunc=E.isRunningQueuedFunc||!1,E.checkQueuedFunc=function(){if(!0!==E.isRunningQueuedFunc){for(E.isRunningQueuedFunc=!0;E.queuePointer<E.que.length;)E.que[E.queuePointer](),E.queuePointer++;E.isRunningQueuedFunc=!1}},E.que.push=function(a){Array.prototype.push.call(E.que,a),E.checkQueuedFunc()},E.checkQueuedFunc()},function(a,b,c){"use strict";function d(a){function b(){var b=function(){var b=[],c=void 0;do{try{c=c?c.parent:a;try{b.push({referrer:c.document.referrer||null,location:c.location.href||null,isTop:c==a.top})}catch(d){b.push({referrer:null,location:null,isTop:c==a.top}),(0,e.logInfo)("Trying to access cross domain iframe. Continuing without referrer and location")}}catch(a){return b.push({referrer:null,location:null,isTop:!1}),b}}while(c!=a.top);return b}(),c=function(){try{if(!a.location.ancestorOrigins)return;return a.location.ancestorOrigins}catch(a){}}();if(c)for(var d=0,f=c.length;d<f;d++)b[d].ancestor=c[d];return b}return function(){try{var a=b(),c=a.length-1,d=null!==a[c].location||c>0&&null!==a[c-1].referrer,e=function(a){var b=[],c=null,d=null,e=null,f=null,g=null,h=null,i=void 0;for(i=a.length-1;i>=0;i--){try{d=a[i].location}catch(a){}if(d)c=encodeURIComponent(d),b.push(c),h||(h=c);else if(0!==i){e=a[i-1];try{f=e.referrer,g=e.ancestor}catch(a){}f?(c=encodeURIComponent(f),b.push(c),h||(h=c)):g?(c=encodeURIComponent(g),b.push(c),h||(h=c)):b.push(null)}else b.push(null)}return{stack:b,detectedRefererUrl:h}}(a);return{referer:e.detectedRefererUrl,reachedTop:d,numIframes:c,stack:e.stack}}catch(a){}}}Object.defineProperty(b,"__esModule",{value:!0}),b.getRefererInfo=void 0,b.detectReferer=d;var e=c(0);b.getRefererInfo=d(window)},function(a,b,c){"use strict";function d(a,b){try{return decodeURIComponent(a.join(""))}catch(a){}if(1===a.length)return a;b=b||1;var c=a.slice(0,b),e=a.slice(b);return Array.prototype.concat.call([],d(c),d(e))}function e(a){try{return decodeURIComponent(a)}catch(e){for(var b=a.match(f),c=1;c<b.length;c++)b=(a=d(b,c).join("")).match(f);return a}}var f=new RegExp("%[a-f0-9]{2}","gi"),g=new RegExp("(%[a-f0-9]{2})+","gi");a.exports=function(a){if("string"!=typeof a)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof a+"`");try{return a=a.replace(/\+/g," "),decodeURIComponent(a)}catch(b){return function(a){for(var b={"%FE%FF":"","%FF%FE":""},c=g.exec(a);c;){try{b[c[0]]=decodeURIComponent(c[0])}catch(a){var d=e(c[0]);d!==c[0]&&(b[c[0]]=d)}c=g.exec(a)}b["%C2"]="";for(var f=Object.keys(b),h=0;h<f.length;h++){var i=f[h];a=a.replace(new RegExp(i,"g"),b[i])}return a}(a)}}},function(a,b,c){"use strict";var d=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable;a.exports=function(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de","5"===Object.getOwnPropertyNames(a)[0])return!1;for(var b={},c=0;c<10;c++)b["_"+String.fromCharCode(c)]=c;if("0123456789"!==Object.getOwnPropertyNames(b).map(function(a){return b[a]}).join(""))return!1;var d={};return"abcdefghijklmnopqrst".split("").forEach(function(a){d[a]=a}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},d)).join("")}catch(a){return!1}}()?Object.assign:function(a,b){for(var c,g,h=function(a){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}(a),i=1;i<arguments.length;i++){for(var j in c=Object(arguments[i]))e.call(c,j)&&(h[j]=c[j]);if(d){g=d(c);for(var k=0;k<g.length;k++)f.call(c,g[k])&&(h[g[k]]=c[g[k]])}}return h}},function(a,b,c){"use strict";a.exports=function(a){return encodeURIComponent(a).replace(/[!'()*]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()})}},function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){(p=new Promise(function(c,d){n.then(function(e){if((0,i.logInfo)("Tunnl initAdServerHook"),e===v)return(0,i.logWarn)("WARNING: Tunnl response timeout expired. Continuing without Tunnl data."),b(a,b),d(),void o.then(function(){Object.keys(m).forEach(function(a){m[a]&&fetch(m[a].Err+"&hb_timeout=1").then(i.checkHttpStatus)})}).catch(function(){});clearTimeout(q),r&&Object.keys(m).forEach(function(b){k.setDfpAdUnitCodeForAdSlot(b,m[b].nsid+"/"+m[b].tid),Object.keys(a.config.display.slots).filter(function(a){return a.indexOf("@")>0&&a.substring(0,a.indexOf("@"))===b}).forEach(function(a){return k.setDfpAdUnitCodeForAdSlot(a,m[b].nsid+"/"+m[b].tid)})}),b(a,b),c()}).catch(function(c){(0,i.logError)("Tunnl Response Error: "+JSON.stringify(c)),b(a,b),d()})})).catch(function(){})}function f(a,b){p.then(function(){(0,i.logInfo)("Tunnl bidsBackHandlerHook"),googletag.cmd.push(function(){l.que.push(function(){googletag.pubads().getSlots().forEach(function(a){var b=a.getSlotElementId();if(m[b]){var c={};Object.keys(m[b]).filter(function(a){return/^tnl_|ch/.test(a)}).forEach(function(a){return c[a]=m[b][a]}),(0,i.logInfo)("Tunnl DFP targeting for slot "+b+":",c),k.setAdserverTargetingForAdSlot(b,c)}})})}),b(a,b),k.bidsBackHandler.removeHook(f)}).catch(function(){b(a,b),k.bidsBackHandler.removeHook(f)})}var g=d(c(2)),h=d(c(1)),i=c(0),j=new h.default,k=void 0,l=void 0,m={},n=void 0,o=void 0,p=void 0,q=void 0,r=!1,s=g.default.EVENTS.MODULE_CONFIG_AVAILABLE,t=g.default.HOOKS.BIDS_BACK_HANDLER.PRIORITY.TUNNL,u=g.default.HOOKS.INIT_AD_SERVER.PRIORITY.TUNNL,v="timeout";j.subscribe(s,function(a){var b=a.modulesConfig,c=a.dfpSlots,d=a.templateName,g=a.selectedAds,h=a.gameId,j=a.idhb,p=a.pbjs,s=b.tunnl;if(s){if(s.enabled){k=j,l=p;var w="https://pub.headerlift.com/opphb?page_url="+(0,i.getParentUrl)(),x=[];if(d=d.replace(/template/i,""),r=!(!s.tagId&&!s.dynamicTagId),Object.keys(c).forEach(function(a){if(!(a.indexOf("@")>0||s.slots&&-1===s.slots.indexOf(a)||g&&-1===g.indexOf(a))){var b=w,e=d+"___"+a;b+="gd__banner"===a?"&game_id="+(h||"")+"&ad_position=gdbanner":"gd__preroll_banner"===a?"&game_id="+(h||"")+"&ad_position=gdprerollbanner":"&dslot="+e,k.setAdserverTargetingForAdSlot(a,{tnl_asset_id:e,tnl_system:1}),s.dynamicTagId||(b+="&tid="+(s.tagId?s.tagId:c[a].code)),s.urlParams&&s.urlParams.forEach(function(a){return b+="&"+a[0]+"="+a[1]});var f=fetch(b).then(i.checkHttpStatus).then(function(a){return a.json()}).then(function(b){m[a]=b});x.push(f)}}),0!==x.length){if(o=Promise.all(x),"number"==typeof s.timeout&&s.timeout>0){(0,i.logInfo)("Tunnl: setting fetch timeout to "+s.timeout+"ms");var y=new Promise(function(a){q=setTimeout(a,s.timeout,v)});n=Promise.race([o,y])}k.initAdServer.addHook(e,u),k.bidsBackHandler.addHook(f,t)}}}else(0,i.logInfo)("No configuration found for Tunnl module")})},function(a,b,c){c(19),a.exports=c(14)}]);